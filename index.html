<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steve Espíritu | Guitarrista & Creador</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
		
  
        
        document.addEventListener('contextmenu', (event) => event.preventDefault());

        
        document.addEventListener('keydown', (event) => {
            if (
                event.key === "F12" || 
                (event.ctrlKey && event.key === "u") || 
                (event.ctrlKey && event.shiftKey && (event.key === "i" || event.key === "j"))
            ) {
                event.preventDefault();
            }
        });

      
       (function detectDevTools() {
    let isDevToolsOpen = false;
    const threshold = 160; // Umbral para el tamaño del panel

    const checkDevTools = () => {
        const widthThreshold = window.outerWidth - window.innerWidth > threshold;
        const heightThreshold = window.outerHeight - window.innerHeight > threshold;
        
        if (widthThreshold || heightThreshold) {
            if (!isDevToolsOpen) {
                const target = document.getElementById('principe');
                if (target) {
                    target.innerHTML = ''; 
                }
                console.log("Inspeccionar elemento detectado.");
                isDevToolsOpen = true;
            }
        } else {
            isDevToolsOpen = false; // Restablece si se cierran las herramientas
        }
        setTimeout(checkDevTools, 1000);
    };

    checkDevTools();
})();
  
        tailwind.config = {
            darkMode: 'class', // Habilitar modo oscuro por clase
            theme: {
                extend: {
                    colors: {
                        brand: {
                            cyan: '#17e6b7',
                            blue: '#1ab4f4',
                            dark: '#06151a'
                        }
                    },
                    backgroundImage: {
                        'brand-gradient': 'linear-gradient(32deg, rgba(23, 230, 183, 1) 0%, rgba(26, 180, 244, 1) 100%)',
                    },
                    fontFamily: {
                        oswald: ['Oswald', 'sans-serif'],
                        inter: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
    :root {
  --scroll-track: #000000;            /* fondo del scrollbar (track) en dark */
  --scroll-thumb: #17e6b7;            /* color del thumb (verde cyan) */
  --scroll-thumb-hover: #12d7a8;      /* hover más intenso */
  --scroll-width: 8px;                /* ancho/alto del scrollbar */
}

/* Modo claro: override */
body.light-mode {
  --scroll-track: #ffffff;            /* fondo del scrollbar en light */
  --scroll-thumb: #17e6b7;            /* mismo thumb cyan */
  --scroll-thumb-hover: #12d7a8;
}

/* WebKit (Chrome, Edge, Safari) */
*::-webkit-scrollbar {
  width: var(--scroll-width);
  height: var(--scroll-width);
}

/* Track (fondo) */
*::-webkit-scrollbar-track {
  background: var(--scroll-track);
}

/* Thumb (la "barra" deslizable) */
*::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 999px;
            /* separación limpia */
  
  cursor: pointer;
  
}

/* Hover del thumb */

/* Botón de tema y de sonido */
#theme-toggle, #sound-toggle {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: white;
    padding: 8px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s ease;
}
body.light-mode #theme-toggle, body.light-mode #sound-toggle {
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: #111827;
}
#theme-toggle:hover, #sound-toggle:hover {
    background: #17e6b7;
    color: black;
}
/* Esquina (cuando hay scroll horizontal+vertical) */
*::-webkit-scrollbar-corner {
  background: var(--scroll-track);
}
        :root {
            --bg-primary: #051525;
            --bg-secondary: #06151a;
            --text-primary: #e5e5e5;
            --text-secondary: #9ca3af;
            --border-color: rgba(255, 255, 255, 0.1);
            --input-bg: rgba(0, 0, 0, 0.5);
        }

        /* --- MODO CLARO (LIGHT MODE) --- */
        body.light-mode {
            --bg-primary: #f3f4f6; /* Gris muy claro */
            --bg-secondary: #ffffff; /* Blanco puro */
            --text-primary: #111827; /* Gris muy oscuro */
            --text-secondary: #4b5563; /* Gris medio */
            --border-color: rgba(0, 0, 0, 0.1);
            --input-bg: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, var(--bg-primary) 0%, #000000 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            transition: background 0.3s ease, color 0.3s ease;
        }

        /* Ajuste específico para el background en modo claro */
        body.light-mode {
            background: linear-gradient(180deg, #f9fafb 0%, #e5e7eb 100%);
        }
        
        /* LOGO: En modo oscuro invertimos a blanco, en modo claro dejamos original (oscuro) */
        .logosteve {
            filter: invert(100%);
            max-height: 6rem;
            width: auto;
            transition: filter 0.3s ease;
        }
        body.light-mode .logosteve {
            filter: invert(0%);
        }

        /* ICONOS DE VERSIÓN EN MODO CLARO */
        body.light-mode .version-icon img.invert-on-light {
            filter: invert(100%);
        }

        /* --- ESTILOS DE MENÚ --- */
        .nav-item {
            position: relative;
            text-transform: uppercase;
            font-family: 'Oswald', sans-serif;
            font-weight: 500;
            letter-spacing: 0.05em;
            padding-bottom: 4px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }
        .nav-item:hover { color: #17e6b7; }
        body.light-mode .nav-item:hover { color: #1ab4f4; }

        .nav-item::after {
            content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0;
            background-color: #17e6b7; transition: width 0.3s ease-in-out;
        }
        .nav-item:hover::after { width: 100%; }

        .nav-special {
            background: linear-gradient(32deg, rgba(23, 230, 183, 1) 0%, rgba(26, 180, 244, 1) 100%);
            color: #000; padding: 8px 24px; border-radius: 9999px; font-weight: bold;
            text-transform: uppercase; font-family: 'Oswald', sans-serif;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .nav-special:hover { transform: scale(1.05); box-shadow: 0 0 15px rgba(23, 230, 183, 0.5); }

        /* --- UI ELEMENTS --- */
        .jagged-btn {
            clip-path: polygon(10% 0%, 100% 0, 100% 70%, 90% 100%, 0 100%, 0% 30%);
            transition: all 0.3s ease; text-transform: uppercase; font-family: 'Oswald', sans-serif;
        }
        .jagged-btn:hover { transform: scale(1.05); background: linear-gradient(32deg, rgba(23, 230, 183, 1) 0%, rgba(26, 180, 244, 1) 100%); color: black; }

        .view-container { display: none; opacity: 0; transition: opacity 0.5s ease; }
        .view-container.active { display: block; opacity: 1; }

        /* --- TABS SYSTEM --- */
        .tab-card {
            background: linear-gradient(90deg, rgba(6,21,26,0.95) 0%, rgba(6,21,26,0.8) 100%);
            border-left: 4px solid #17e6b7;
            transition: background 0.3s ease, border 0.3s ease;
        }
        body.light-mode .tab-card {
            background: linear-gradient(90deg, #ffffff 0%, #f9fafb 100%);
            border: 1px solid #e5e7eb;
            border-left: 4px solid #17e6b7;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .version-icon {
            width: 36px; height: 36px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 6px; transition: all 0.3s ease; cursor: pointer; position: relative;
            background: rgba(0,0,0,0.5); 
            border: 1px solid transparent; 
        }
        body.light-mode .version-icon {
            background: rgba(0,0,0,0.05);
        }
        
        @media (min-width: 768px) {
            .version-icon {
                width: 55px; height: 55px;
            }
        }

        .version-icon img { width: 75%; height: 75%; object-fit: contain; transition: filter 0.3s ease; }
        
        .version-icon.available { 
            border-color: #17e6b7; 
            box-shadow: 0 0 5px rgba(23, 230, 183, 0.2); 
        }
        .version-icon.available:hover { 
            transform: scale(1.1); 
            background: rgba(23, 230, 183, 0.1); 
        }
        
        .version-icon.unavailable { 
            border-color: transparent; 
            opacity: 0.3; 
            filter: grayscale(100%); 
        }
        .version-icon.unavailable:hover { 
            border-color: #ef4444; 
            opacity: 0.8; 
            filter: grayscale(0%); 
        }
        /* 2. PREMIUM */
        .version-icon.premium { 
            border-color: #F59E0B; 
            background: rgba(245, 158, 11, 0.15);
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.6), 
                        0 0 30px rgba(245, 158, 11, 0.3),
                        inset 0 0 10px rgba(245, 158, 11, 0.1); 
            z-index: 10;
        }
        .version-icon.premium:hover { 
            transform: scale(1.15); 
            background: rgba(245, 158, 11, 0.3); 
            border-color: #fbbf24; 
            box-shadow: 0 0 25px rgba(245, 158, 11, 0.8), 
                        0 0 50px rgba(245, 158, 11, 0.5),
                        0 0 10px rgba(255, 255, 255, 0.2);
        }
        .status-dot {
            position: absolute; top: -3px; right: -3px; width: 6px; height: 6px; border-radius: 50%;
        }
        .status-dot.green { background-color: #17e6b7; box-shadow: 0 0 5px #17e6b7; }
        .status-dot.orange { background-color: #F59E0B; box-shadow: 0 0 8px #F59E0B; }
        .status-dot.red { background-color: #ef4444; }
        
        .dynamic-panel {
            background: rgba(0,0,0,0.9);
            border-top: 1px solid rgba(23, 230, 183, 0.3);
            padding: 20px;
        }
        body.light-mode .dynamic-panel {
            background: #ffffff;
            border-top: 1px solid rgba(23, 230, 183, 0.5);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        /* --- OVERRIDES PARA MODO CLARO EN TAILWIND --- */
        /* Forzamos estilos sobre las clases de utilidad de Tailwind cuando light-mode está activo */
        body.light-mode .bg-\[\#06151a\] { background-color: var(--bg-secondary) !important; }
        body.light-mode .bg-\[\#06151a\]\/95 { background-color: rgba(255, 255, 255, 0.95) !important; }
        body.light-mode .bg-\[\#06151a\]\/80 { background-color: rgba(255, 255, 255, 0.8) !important; }
        body.light-mode .bg-black { background-color: var(--bg-secondary) !important; }
        body.light-mode .bg-black\/40 { background-color: rgba(255,255,255, 0.6) !important; }
        body.light-mode .bg-black\/50 { background-color: rgba(0,0,0, 0.05) !important; color: #000 !important; }
        body.light-mode .bg-black\/60 { background-color: rgba(255,255,255, 0.9) !important; }
        body.light-mode .bg-black\/80 { background-color: rgba(255, 255, 255, 0.8) !important; }
        body.light-mode .bg-black\/90 { background-color: rgba(255,255,255, 0.95) !important; }
        
        body.light-mode .text-white { color: var(--text-primary) !important; }
        body.light-mode .text-gray-300 { color: #4b5563 !important; }
        body.light-mode .text-gray-400 { color: #6b7280 !important; }
        body.light-mode .border-white\/10 { border-color: rgba(0,0,0,0.1) !important; }
        body.light-mode .border-white\/5 { border-color: rgba(0,0,0,0.05) !important; }
        body.light-mode .border-white\/20 { border-color: rgba(0,0,0,0.2) !important; }
        
        /* Excepciones para modo claro (Footer, Modales, etc que deben seguir siendo oscuros) */
        body.light-mode footer.bg-black { background-color: #111827 !important; }
        body.light-mode footer .text-white { color: #ffffff !important; }
        
        /* FIX: Modal Overrides */
        body.light-mode #playlist-modal .bg-black { background-color: #000 !important; } /* Video container stays black */
        body.light-mode .modal-bg { background-color: #ffffff !important; border-color: rgba(0,0,0,0.1) !important; }
        body.light-mode .gallery-bg { background-color: #f9fafb !important; border-left-color: rgba(0,0,0,0.1) !important; }
        body.light-mode #playlist-modal .text-white { color: #111827 !important; }

        /* FIX: Editorial Card */
        .editorial-card {
            background-image: linear-gradient(to bottom right, #06151a, rgba(30, 58, 138, 0.2));
        }
        body.light-mode .editorial-card {
            background-image: linear-gradient(to bottom right, #ffffff, #eff6ff); /* White to blue-50 */
            border-color: rgba(0,0,0,0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* --- CLASES DE EXCEPCIÓN PARA EL HEADER (HERO) --- */
        /* Estas clases fuerzan el modo oscuro incluso cuando body.light-mode está activo */
        .always-bg-dark { background-color: #051525 !important; }
        .always-text-white { color: #ffffff !important; }
        .always-text-gray-300 { color: #d1d5db !important; }
        .always-text-gray-400 { color: #9ca3af !important; }
        .always-border-white-20 { border-color: rgba(255,255,255,0.2) !important; }
        .always-bg-white-10 { background-color: rgba(255,255,255,0.1) !important; }

        /* --- ANIMACIONES Y FONDO DEL HERO --- */
        @keyframes lightning {
            0%, 15%, 30%, 34%, 40%, 65%, 100% { opacity: 0.8; }
            1%, 31%, 41% { opacity: 1; filter: brightness(1.3); }
        }
        
        .lightning-bg {
            position: absolute; 
            top: 0; 
            z-index: 0; 
            animation: lightning 3s infinite; 
            pointer-events: none;
            background-image: url('https://blogger.googleusercontent.com/img/a/AVvXsEgkwt_0r8BsBL3iT7Wd12hh1QG-umVLapMM3D8qvyFIrs0OGOra1NCwzlaJ5aXuJHjZJJbJETCrnv_raJ8eXvEbY8eNHf6iDl_BamGGD93sxx4iidlT57PBRo7K6wZa1ghAFXrKhZbDAPlNjb4nSYo_fXNfOHt4XiPkyTwLhzY1Sf3T8sMXU0IDgv4x2Lg1');
            background-size: cover;
            background-position: center;
        }

        /* En PC: Ocupa la mitad derecha y tiene degradado de fusión */
        @media (min-width: 1024px) {
            .lightning-bg {
                right: 0;
                width: 50%;
                height: 100%;
                /* Degradado negro a la izquierda para fusionar con el fondo */
                mask-image: linear-gradient(to right, transparent, black 20%);
                -webkit-mask-image: linear-gradient(to right, transparent, black 20%);
            }
        }

        /* En Móvil: Ocupa todo y está detrás */
        @media (max-width: 1023px) {
            .lightning-bg {
                right: 0;
                width: 100%;
                height: 100%;
                opacity: 0.4 !important; /* Más sutil en móvil para leer texto */
            }
        }
        
        /* Capa del Guitarrista (Hermano de Lightning) */
        .guitarrista-container {
            position: absolute;
            top: 0;
            height: 100%;
            z-index: 1; /* Encima del lightning, debajo del texto (z-20) */
            pointer-events: none;
        }

        .guitarrista-img {
            height: 100%;
            width: auto;
            object-fit: contain;
            position: absolute;
            bottom: -5%; /* Ajuste fino vertical */
        }

        /* Posicionamiento PC */
        @media (min-width: 1024px) {
            .guitarrista-container {
                right: 0;
                width: 50%;
            }
            .guitarrista-img {
                left: 15%; /* Desplazado 15% desde la izquierda de su contenedor */
                max-width: 100%;
            }
        }

        /* Posicionamiento Móvil */
        @media (max-width: 1023px) {
            .guitarrista-container {
                right: 0;
                width: 100%;
            }
            .guitarrista-img {
                right: 5%; /* Desplazado 15% desde la derecha de la pantalla */
                opacity: 0.5; /* Transparencia para no pelear con el texto */
                max-height: 80vh; /* Evitar que sea gigante en móviles altos */
                bottom: 0;
            }
        }
         @media (max-width: 576px) {
            
            .guitarrista-img {
                right: 5%; /* Desplazado 15% desde la derecha de la pantalla */
                opacity: 0.5; /* Transparencia para no pelear con el texto */
                max-height: 70vh; /* Evitar que sea gigante en móviles altos */
                bottom: 0;
            }
        }

        /* --- IMAGEN HERO (OLD - REMOVER SI NO SE USA) --- */
        /* .hero-img-container { ... } */

        /* --- REDES SOCIALES FOOTER --- */
        #social-icons { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
        #social-icons a { display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; transition: transform 0.3s; }
        #social-icons a:hover { transform: scale(1.1); }
        #social-icons svg { width: 30px; height: 30px; fill: #FFFFFF; transition: fill 0.3s; }
        #social-icons a:hover svg { fill: #17e6b7 !important; }

        /* --- PLAYLIST MODAL --- */
        #playlist-modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        #playlist-modal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #playlist-modal.flex { opacity: 1; visibility: visible; pointer-events: auto; }
        
        /* --- PATREON STRIP --- */
        #patreonenlace {
            display: flex; align-items: center; justify-content: center;
            background: #FF424D; color: white; padding: 10px; margin-bottom: 15px;
            border-radius: 4px; text-decoration: none; font-weight: bold; font-size: 0.9rem;
            gap: 10px; width: 100%; transition: background 0.2s;
        }
        #patreonenlace:hover { background: #E63944; }
        #patreonenlace img { height: 25px; width: auto; filter: brightness(0) invert(1); }
        #patreonenlace p { margin: 0; }
        
        /* Botón de tema */
        #theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        body.light-mode #theme-toggle {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #111827;
        }
        #theme-toggle:hover {
            background: #17e6b7;
            color: black;
        }

    </style>
</head>
<body class="antialiased">

    <!-- AUDIO DE FONDO (TORMENTA) -->
    <audio id="thunder-audio" loop>
        <source src="https://steveespiritumusic.github.io/audio-bg/Wonderful%20Thunderbolt(beautiful%20thunderstorm)%20-%20rahim%20barzi.mp3" type="audio/mpeg">
    </audio>
    <!-- Navegación -->
    <nav class="fixed w-full z-50 bg-[#06151a]/95 backdrop-blur-md border-b border-white/10 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <button onclick="showHome()" class="flex-shrink-0 font-bold text-3xl tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-[#17e6b7] to-[#1ab4f4] hover:opacity-80 transition-opacity font-oswald uppercase">
                    <img class="logosteve" src="https://blogger.googleusercontent.com/img/a/AVvXsEjVyRg52gLBBWEMxyqHz4DnbzGS5g3kzGzSAQJj0xDrSn43GMze0KzmSUgDDSBirv8UhXWzVEKbTSkN6oXKly4XXhQaMs8ietdA-ZNjcKQmcurCzGuNfxQPE5IcQMtwJXr-Utyr_FFH2_sewTEzVQtkt-t5xJZMPB1IYDNMOVrXaTdDCzMGKTCUhvzMGd3q" alt="Steve Espíritu Logo" />
                </button>
                
                 <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="scrollToSection('inicio')" id="nav-inicio" class="nav-item">Inicio</button>
                    <button onclick="scrollToSection('bio')" id="nav-bio" class="nav-item">Biografía</button>
                    <button onclick="scrollToSection('discografia')" id="nav-discografia" class="nav-item">Discografía</button>
                    <button onclick="scrollToSection('vlogs')" id="nav-vlogs" class="nav-item">Vlogs & Experiencias</button>
                    <button onclick="scrollToSection('contacto')" id="nav-contacto" class="nav-item">Contacto</button>
                    <button onclick="showTabsApp()" class="nav-special flex items-center gap-2">
                        <i data-lucide="music" class="w-4 h-4"></i> TABS Precisas
                    </button>
                    <!-- Toggle Dark/Light Mode -->
                       <!-- Sound Toggle Desktop -->
                        <button id="sound-toggle" onclick="toggleSound()" aria-label="Activar sonido">
                            <i data-lucide="volume-x" class="w-5 h-5" id="icon-sound-off"></i>
                            <i data-lucide="volume-2" class="w-5 h-5 hidden" id="icon-sound-on"></i>
                        </button>
                    <button id="theme-toggle" onclick="toggleTheme()" aria-label="Cambiar tema">
                        <i data-lucide="sun" class="w-5 h-5 hidden" id="icon-sun"></i>
                        <i data-lucide="moon" class="w-5 h-5" id="icon-moon"></i>
                    </button>
                  
                </div>
                
                <!-- Mobile Button & Toggle -->
                <div class="md:hidden flex items-center gap-4">
                     <!-- Sound Toggle Mobile -->
                     <button onclick="toggleSound()" class="text-white hover:text-[#17e6b7] transition-colors p-2 rounded-full border border-white/10" aria-label="Activar sonido">
                        <i data-lucide="volume-x" class="w-5 h-5" id="icon-sound-off-mobile"></i>
                        <i data-lucide="volume-2" class="w-5 h-5 hidden" id="icon-sound-on-mobile"></i>
                    </button>
                     <!-- Toggle Dark/Light Mode Mobile -->
                     <button onclick="toggleTheme()" class="text-white hover:text-[#17e6b7] transition-colors p-2 rounded-full border border-white/10" aria-label="Cambiar tema">
                        <i data-lucide="sun-medium" class="w-5 h-5 hidden" id="icon-sun-mobile"></i>
                        <i data-lucide="moon" class="w-5 h-5" id="icon-moon-mobile"></i>
                    </button>

                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-white hover:text-[#17e6b7]">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-[#06151a] border-b border-white/10 absolute w-full">
            <div class="px-4 pt-2 pb-6 space-y-2 text-center flex flex-col">
                <button onclick="scrollToSection('inicio'); toggleMobile()" class="nav-item py-3 border-b border-white/5 w-full">Inicio</button>
                <button onclick="scrollToSection('bio'); toggleMobile()" class="nav-item py-3 border-b border-white/5 w-full">Biografía</button>
                <button onclick="scrollToSection('discografia'); toggleMobile()" class="nav-item py-3 border-b border-white/5 w-full">Discografía</button>
                <button onclick="scrollToSection('vlogs'); toggleMobile()" class="nav-item py-3 border-b border-white/5 w-full">Vlogs</button>
                <button onclick="showTabsApp(); toggleMobile()" class="nav-special mt-4 mx-auto w-full max-w-xs">TABS Precisas</button>
            </div>
        </div>
    </nav>

    <!-- VENTANA MODAL FLOTANTE (PLAYLIST) -->
    <div id="playlist-modal" class="fixed inset-0 z-[100] bg-black/90 hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <!-- FIX: Agregada clase modal-bg para control en light mode -->
        <div class="bg-[#06151a] modal-bg w-full max-w-7xl rounded-lg border border-[#17e6b7]/30 shadow-[0_0_50px_rgba(23,230,183,0.15)] relative flex flex-col max-h-[90vh]">
            
            <!-- Header Modal -->
            <div class="flex justify-between items-center p-4 border-b border-white/10 bg-[#06151a] modal-bg rounded-t-lg">
                <h3 id="playlist-title" class="text-xl md:text-2xl font-bold text-white font-oswald uppercase tracking-wide flex items-center gap-2">
                    <i data-lucide="list-video" class="text-[#17e6b7]"></i> 
                    <span>TITULO PLAYLIST</span>
                </h3>
                <button onclick="closePlaylistModal()" class="text-gray-400 hover:text-red-500 transition-colors bg-white/5 p-2 rounded-full">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Content Modal -->
            <div class="flex flex-col md:flex-row w-full bg-black">

                <!-- Reproductor principal -->
                <div class="relative w-full md:w-3/4 aspect-video bg-black">
                    <iframe id="playlist-iframe"
                        class="w-full h-full"
                        src=""
                        frameborder="0"
                        allow="autoplay; encrypted-media"
                        allowfullscreen>
                    </iframe>
                </div>

                <!-- Galería lateral -->
                <!-- FIX: Agregada clase gallery-bg para control en light mode -->
                <div class="w-full md:w-1/4 max-h-[70vh] overflow-y-auto bg-[#050d12] gallery-bg border-l border-[#17e6b7]/20 p-3 space-y-3"
                     id="playlist-gallery">
                    <!-- Thumbnails dinámicos -->
                </div>

            </div>


            <!-- Footer Modal -->
            <div class="p-4 bg-[#06151a] modal-bg border-t border-white/10 text-center rounded-b-lg">
                <p id="playlist-desc" class="text-gray-400 text-sm mb-1">Descripción de la lista.</p>
                <p class="text-[#17e6b7] text-xs uppercase tracking-widest font-bold">Steve Espíritu Music TV</p>
            </div>
        </div>
    </div>

    <!-- LANDING PAGE -->
    <div id="landing-page" class="view-container active">
        
        <!-- Hero Section FIX: Clase always-bg-dark para mantener fondo oscuro en light mode -->
        <header id="inicio" class="relative min-h-screen flex items-center pt-20 px-4 overflow-hidden always-bg-dark">
            
            <!-- FONDO LIGHTNING (Capa 0) -->
            <div class="lightning-bg"></div>
            
            <!-- GUITARRISTA (Capa 1) -->
            <div class="guitarrista-container">
                <img class="guitarrista-img" src="https://blogger.googleusercontent.com/img/a/AVvXsEhfE7kKD3uSWE44iP-gDRFf5kNW7ADXkxKsZ16hCcJwf6BLspsgXgpdk8Gt_U7YXAT42bGem07JSSXi01Nu9j7cp1p7zSnKUUZkjuoIxvbzVA4b61xenOM4SRJbEfDsXPQD_8wcTqQY_owDZLAqisengid7Es7Ia1SkLLWTsARLrEVhaVT8VleCC4QB3pDQ" alt="Steve Guitarrista" />
            </div>

            <!-- CONTENIDO (Capa 2 - z-20) -->
            <div class="relative z-20 max-w-7xl mx-auto w-full grid lg:grid-cols-2 gap-12 items-center">
                <div class="text-left">
                    

                    <div class="inline-block px-4 py-1 mb-4 border border-[#17e6b7] rounded-full bg-black/50 backdrop-blur fade-in-section">
                        <span class="text-[#17e6b7] text-xs font-bold tracking-[0.2em] uppercase">Guitarrista - Transcriptor - Compositor</span>
                    </div>
                    <!-- FIX: Clases always-text-white para ignorar tema claro -->
                    <h1 class="text-6xl md:text-8xl font-bold always-text-white mb-6 leading-none font-oswald uppercase fade-in-section" style="transition-delay: 0.1s">
                       <p class="mb-4">Steve</p>
                        <span class="mt-6 overflow text-transparent bg-clip-text bg-gradient-to-r from-[#17e6b7] to-[#1ab4f4]">Espíritu</span>
                    </h1>
                    <p class="text-lg always-text-gray-300 mb-8 max-w-xl font-light leading-relaxed fade-in-section" style="transition-delay: 0.2s">
                       Soy guitarrista profesional: interpreto, transcribo y documento música con un enfoque técnico y auditivo. Aquí encontrarás mi obra, mis proyectos en vivo, mis análisis y una biblioteca profesional de transcripciones.
                    </p>
                    <div class="flex flex-wrap gap-4 fade-in-section mb-8" style="transition-delay: 0.3s">
                        <button onclick="scrollToSection('bio')" class="jagged-btn px-8 py-4 bg-white/10 border always-border-white-20 always-text-white font-bold text-sm tracking-widest hover:text-black hover:bg-white transition-all">
                            Mi historia
                        </button>
                        <button onclick="showTabsApp()" class="jagged-btn px-8 py-4 bg-[#17e6b7]/10 border border-[#17e6b7] text-[#17e6b7] font-bold text-sm tracking-widest hover:bg-[#17e6b7] hover:text-black flex items-center gap-2 transition-all">
                            <i data-lucide="file-search" class="w-4 h-4"></i> TABLATURAS DE ALTA PRECISIÓN
                        </button>
                    </div>

                    <!-- NUEVO: Barra de Stats / Social Proof -->
                    <div class="flex items-center gap-6 text-sm always-text-gray-400 font-oswald uppercase tracking-widest fade-in-section" style="transition-delay: 0.4s">
                        <div class="flex items-center gap-2">
                            <i data-lucide="users" class="w-4 h-4 text-[#17e6b7]"></i>
                            <span>+1000 Seguidores</span>
                        </div>
                        <div class="w-px h-4 bg-white/20"></div>
                        <div class="flex items-center gap-2">
                            <i data-lucide="music-2" class="w-4 h-4 text-[#1ab4f4]"></i>
                            <span>+10 Años de Experiencia</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sección: BIO & HISTORIA -->
        <section id="bio" class="py-24 px-4 bg-black/40 backdrop-blur-sm border-t border-white/5">
            <div class="max-w-6xl mx-auto fade-in-section">
                <div class="text-center mb-12">
                    <h2 class="text-5xl font-bold uppercase tracking-tighter text-white font-oswald">MI HISTORIA</h2>
                </div>
                
                <!-- Parte Superior: Texto y Editorial (Original) -->
                <div class="grid md:grid-cols-2 gap-12 items-center mb-20">
                    <div class="space-y-6 text-lg text-gray-300">
                        <div class="bg-[#06151a]/80 p-8 rounded border-l-4 border-[#17e6b7]">
                            <h3 class="text-2xl font-bold text-[#17e6b7] mb-4 font-oswald uppercase">Formación y Desarrollo</h3>
                            <p>El desarrollo técnico comenzó a temprana edad. A través de un proceso autodidacta riguroso, enfoqué mi estudio en el análisis armónico y la ejecución de alta velocidad.</p>
                        </div>
                        <p>La experiencia en el circuito callejero y de escenarios consolidó una filosofía: la técnica no es solo velocidad, es <strong>precisión comunicativa</strong>.</p>
                        <p>Actualmente, mi labor se centra en la transcripción precisa y la producción de material educativo de alto nivel.</p>
                    </div>
                    
                    <!-- FIX: Agregada clase editorial-card para control del gradiente -->
                    <div class="editorial-card p-8 rounded border border-white/10 relative overflow-hidden group">
                        <div class="absolute -right-10 -top-10 bg-[#1ab4f4]/10 w-40 h-40 rounded-full group-hover:scale-150 transition-transform duration-700"></div>
                        <h3 class="text-2xl font-bold text-white font-oswald mb-6 uppercase flex items-center gap-2">
                            <i data-lucide="book-open" class="text-[#1ab4f4]"></i> Proyectos Editoriales
                        </h3>
                        <ul class="space-y-6">
                            <li class="flex items-start gap-4">
                                <span class="bg-[#1ab4f4] text-black text-xs font-bold px-2 py-1 rounded h-fit mt-1">LIBRO</span>
                                <div>
                                    <strong class="text-white block font-oswald uppercase text-lg">Metodología Técnica Avanzada</strong>
                                    <span class="text-gray-400 text-sm">Sistematización de técnicas de guitarra moderna.</span>
                                </div>
                            </li>
                            <li class="flex items-start gap-4">
                                <span class="bg-[#17e6b7] text-black text-xs font-bold px-2 py-1 rounded h-fit mt-1">CURSO</span>
                                <div>
                                    <strong class="text-white block font-oswald uppercase text-lg">Programa de Alto Rendimiento</strong>
                                    <span class="text-gray-400 text-sm">Formación integral desde fundamentos hasta virtuosismo.</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- NUEVO: Galería "El Viaje" (Timeline) -->
                <div class="border-t border-white/5 pt-12">
                    <h3 class="text-3xl font-bold text-white font-oswald uppercase mb-8 text-center"><span class="text-[#17e6b7]">El Viaje:</span> De la Cochera al Escenario</h3>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Foto 1 -->
                        <div class="group relative aspect-[4/5] overflow-hidden rounded-lg border border-white/10 bg-black">
                            <img src="https://images.unsplash.com/photo-1514525253440-b393452e8d26?auto=format&fit=crop&q=80&w=400" 
                                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100" 
                                 alt="Inicios 16 años">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex items-end p-4 translate-y-2 group-hover:translate-y-0 transition-transform">
                                <div>
                                    <span class="text-[#17e6b7] text-[10px] font-bold uppercase tracking-widest mb-1 block">2014</span>
                                    <p class="text-white text-sm font-bold uppercase leading-tight">La Banda del Colegio</p>
                                </div>
                            </div>
                        </div>

                        <!-- Foto 2 -->
                        <div class="group relative aspect-[4/5] overflow-hidden rounded-lg border border-white/10 bg-black mt-0 md:mt-8">
                            <img src="https://images.unsplash.com/photo-1525201548942-d8732f6617a0?auto=format&fit=crop&q=80&w=400" 
                                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100" 
                                 alt="Primera guitarra">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex items-end p-4 translate-y-2 group-hover:translate-y-0 transition-transform">
                                <div>
                                    <span class="text-[#1ab4f4] text-[10px] font-bold uppercase tracking-widest mb-1 block">2016</span>
                                    <p class="text-white text-sm font-bold uppercase leading-tight">Primera Stratocaster</p>
                                </div>
                            </div>
                        </div>

                        <!-- Foto 3 -->
                        <div class="group relative aspect-[4/5] overflow-hidden rounded-lg border border-white/10 bg-black">
                            <img src="https://images.unsplash.com/photo-1501612780327-45045538702b?auto=format&fit=crop&q=80&w=400" 
                                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100" 
                                 alt="Escenarios locales">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex items-end p-4 translate-y-2 group-hover:translate-y-0 transition-transform">
                                <div>
                                    <span class="text-[#17e6b7] text-[10px] font-bold uppercase tracking-widest mb-1 block">2019</span>
                                    <p class="text-white text-sm font-bold uppercase leading-tight">Circuito Local</p>
                                </div>
                            </div>
                        </div>

                        <!-- Foto 4 -->
                        <div class="group relative aspect-[4/5] overflow-hidden rounded-lg border border-white/10 bg-black mt-0 md:mt-8">
                            <img src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&q=80&w=400" 
                                 class="w-full h-full object-cover transition-all duration-700 group-hover:scale-110 grayscale-0 opacity-100" 
                                 alt="Actualidad">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent flex items-end p-4">
                                <div>
                                    <span class="text-white text-[10px] font-bold uppercase tracking-widest mb-1 block bg-[#FF424D] px-2 py-0.5 rounded w-fit">HOY</span>
                                    <p class="text-white text-sm font-bold uppercase leading-tight">Músico Profesional</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>


        <!-- Sección: DISCOGRAFÍA -->
        <section id="discografia" class="py-24 px-4 bg-transparent border-t border-white/5">
            <div class="max-w-6xl mx-auto fade-in-section">
                <h2 class="text-5xl font-bold mb-16 text-center uppercase tracking-tighter text-white font-oswald">Discografía</h2>
                
                <div class="grid md:grid-cols-2 gap-12">
                    <div class="group relative">
                        <div class="absolute inset-0 bg-[#1ab4f4]/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <div class="relative bg-black border border-white/10 rounded overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1470225620780-dba8ba36b745?auto=format&fit=crop&q=80&w=600" class="w-full h-64 object-cover">
                            <div class="p-8">
                                <span class="text-[#1ab4f4] text-xs font-bold tracking-[0.2em] uppercase mb-2 block">Inédito</span>
                                <h3 class="text-3xl font-bold text-white font-oswald mb-4 uppercase">Steve Espíritu: Originals</h3>
                                <p class="text-gray-400 mb-6">Metal Progresivo, Fusión y Shred. Composiciones donde la técnica sirve a la emoción.</p>
                                <button class="jagged-btn px-6 py-2 bg-[#1ab4f4] text-black font-bold text-sm">ESCUCHAR EN SPOTIFY</button>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-[#06151a] p-6 rounded border-l-4 border-[#17e6b7] hover:bg-white/5 transition-colors flex gap-4">
<img class="h-20" src="https://yt3.ggpht.com/_wmvgNqi8kaTSHgMVtkmD6Wa6r7-41sY_FgoQYeuNctJDlxCCzgdU8jQdGH7mdIKH7IPAEnl82eF=s800-rw-nd-v1" alt="" />
                            <div>
 <h4 class="text-xl font-bold text-white font-oswald uppercase">Himnos SUD Fingerstyle</h4>
                            <p class="text-sm text-gray-400 mt-2">Arreglos instrumentales para el alma. Paz y técnica en cada cuerda.</p>
                            </div>
                           
                        </div>
                        <div class="bg-[#06151a] p-6 rounded border-l-4 border-purple-500 hover:bg-white/5 transition-colors">
                            <h4 class="text-xl font-bold text-white font-oswald uppercase">Top Hits 2025 (Shred Ver.)</h4>
                            <p class="text-sm text-gray-400 mt-2">Reimaginando el pop actual con guitarras líderes agresivas.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección: VLOGS & LIFESTYLE -->
        <section id="vlogs" class="py-24 px-4 bg-black/40 backdrop-blur-sm border-t border-white/5">
            <div class="max-w-7xl mx-auto fade-in-section">
                <h2 class="text-5xl font-bold mb-4 text-center uppercase tracking-tighter text-white font-oswald">Vlogs & Experiencias</h2>
                <p class="text-center text-gray-400 mb-12 max-w-2xl mx-auto">Selecciona una categoría para ver la lista de reproducción completa.</p>

                <!-- GRID DE TARJETAS DE PLAYLIST CON COLLAGE -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- 1. LIVE STREET COVERS -->
                    <div onclick="openPlaylistModal('PLm_E-acGh_BmxMPUhM8PDnaPL9Mt7xsNJ', 'LIVE STREET SESSIONS', 'Improvisación pura y jams con músicos locales en entornos urbanos.')" 
                         class="bg-[#06151a] rounded overflow-hidden group border border-white/10 hover:border-[#17e6b7] transition-all cursor-pointer">
                        <div class="aspect-video grid grid-cols-2">
                            <img src="https://thumbs.dreamstime.com/b/m%C3%BAsico-joven-de-la-calle-del-guitarrista-londres-inglaterra-marzo-que-se-realiza-en-las-calles-para-entretener-gente-da-une-141586998.jpg" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                            <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity">
                            <img src="https://images.unsplash.com/photo-1493225255756-d9584f8606e9?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100 transition-opacity">
                            <img src="https://images.unsplash.com/photo-1501612780327-45045538702b?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                        </div>
                        <div class="p-5 relative">
                            <div class="absolute -top-6 right-4 bg-red-600 text-white rounded-full p-3 shadow-lg group-hover:scale-110 transition-transform">
                                <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                            </div>
                            <span class="text-red-500 font-bold text-xs uppercase tracking-widest block mb-1">En las Calles</span>
                            <h4 class="text-white font-bold text-xl font-oswald uppercase">Live Street Covers</h4>
                            <p class="text-gray-400 text-sm mt-2">Sesiones en vivo sin cortes.</p>
                        </div>
                    </div>

                    <!-- 2. CONCIERTOS -->
                    <div onclick="openPlaylistModal('PLm_E-acGh_Bl8q6xw9xJngnU55LI-LDm-', 'CONCIERTOS & SHOWS', 'Mi experiencia en primera fila y análisis de los mejores shows.')" 
                         class="bg-[#06151a] rounded overflow-hidden group border border-white/10 hover:border-[#1ab4f4] transition-all cursor-pointer">
                        <div class="aspect-video grid grid-cols-2">
                            <img src="https://meyersound.es/es/wp-content/uploads/2023/06/metallica-2.jpeg" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1501386761578-eac5c94b800a?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://f.rpp-noticias.io/2022/10/29/224322_1336659.jpg?width=1020&quality=80" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                        </div>
                        <div class="p-5 relative">
                            <div class="absolute -top-6 right-4 bg-[#1ab4f4] text-black rounded-full p-3 shadow-lg group-hover:scale-110 transition-transform">
                                <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                            </div>
                            <span class="text-[#1ab4f4] font-bold text-xs uppercase tracking-widest block mb-1">Experiencias</span>
                            <h4 class="text-white font-bold text-xl font-oswald uppercase">Conciertos</h4>
                            <p class="text-gray-400 text-sm mt-2">Vlogs de viaje y backstage.</p>
                        </div>
                    </div>

                    <!-- 3. MANTENIMIENTO / LUTHIER -->
                    <div onclick="openPlaylistModal('PLlKFkV-mgCGM0a2-C8yK2d-7M_2G_cW-2', 'TALLER DEL LUTHIER', 'Guías técnicas para el mantenimiento y calibración de tu instrumento.')" 
                         class="bg-[#06151a] rounded overflow-hidden group border border-white/10 hover:border-yellow-500 transition-all cursor-pointer">
                        <div class="aspect-video grid grid-cols-2">
                            <img src="https://www.guyker.com/cdn/shop/articles/luthier_tools.jpg?v=1740645694" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1516924962500-2b4b3b99ea02?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://www.luthiergranada.es/images/blog/luthier%20Oscar%20Mu%C3%B1oz..png" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1564186763535-ebb21ef5277f?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                        </div>
                        <div class="p-5 relative">
                            <div class="absolute -top-6 right-4 bg-yellow-500 text-black rounded-full p-3 shadow-lg group-hover:scale-110 transition-transform">
                                <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                            </div>
                            <span class="text-yellow-500 font-bold text-xs uppercase tracking-widest block mb-1">Técnico</span>
                            <h4 class="text-white font-bold text-xl font-oswald uppercase">Luthier & Mant.</h4>
                            <p class="text-gray-400 text-sm mt-2">Aprende a ajustar tu guitarra.</p>
                        </div>
                    </div>

                    <!-- 4. MUSIC MARKET / GEAR -->
                    <div onclick="openPlaylistModal('PLlKFkV-mgCGM0a2-C8yK2d-7M_2G_cW-2', 'GEAR & MUSIC MARKET', 'Reviews honestas de guitarras, pedales y visitas a tiendas de música.')" 
                         class="bg-[#06151a] rounded overflow-hidden group border border-white/10 hover:border-purple-500 transition-all cursor-pointer">
                        <div class="aspect-video grid grid-cols-2">
                            <img src="https://images.unsplash.com/photo-1525201548942-d8732f6617a0?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1519508234439-4f23643125c1?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1557804506-669a67965ba0?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSfThjFjUt0fJ0pS2q_M9DXIRnx2nUDnB8HuQ&s" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                        </div>
                        <div class="p-5 relative">
                            <div class="absolute -top-6 right-4 bg-purple-500 text-white rounded-full p-3 shadow-lg group-hover:scale-110 transition-transform">
                                <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                            </div>
                            <span class="text-purple-500 font-bold text-xs uppercase tracking-widest block mb-1">Reviews</span>
                            <h4 class="text-white font-bold text-xl font-oswald uppercase">Music Market</h4>
                            <p class="text-gray-400 text-sm mt-2">Probando equipo de gama alta.</p>
                        </div>
                    </div>

                    <!-- 5. SACANDO CANCIÓN AL OÍDO -->
                    <div onclick="openPlaylistModal('PLlKFkV-mgCGM0a2-C8yK2d-7M_2G_cW-2', 'ENTRENAMIENTO AUDITIVO', 'Proceso en tiempo real de cómo saco canciones de oído, errores incluidos.')" 
                         class="bg-[#06151a] rounded overflow-hidden group border border-white/10 hover:border-[#17e6b7] transition-all cursor-pointer">
                        <div class="aspect-video grid grid-cols-2">
                            <img src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                            <img src="https://images.unsplash.com/photo-1485579149621-3123dd979885?auto=format&fit=crop&q=80&w=300" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0tPdwX-mQTfQaxGj0KSfiI2H4Z4RJO7S6-w&s" class="w-full h-full object-cover opacity-70 group-hover:opacity-100">
                            <img src="https://cdn-ps.guitar-pro.eu/themes/gp_child_classic/assets/img/home/guitar_pro_8_left.jpg" class="w-full h-full object-cover opacity-80 group-hover:opacity-100">
                        </div>
                        <div class="p-5 relative">
                            <div class="absolute -top-6 right-4 bg-[#17e6b7] text-black rounded-full p-3 shadow-lg group-hover:scale-110 transition-transform">
                                <i data-lucide="play" class="w-6 h-6 fill-current"></i>
                            </div>
                            <span class="text-[#17e6b7] font-bold text-xs uppercase tracking-widest block mb-1">Reto Auditivo</span>
                            <h4 class="text-white font-bold text-xl font-oswald uppercase">Sacando al Oído</h4>
                            <p class="text-gray-400 text-sm mt-2">Sin tabs, solo oído y guitarra.</p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contacto" class="py-12 bg-black border-t border-white/5 px-4 text-center">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-2xl font-bold text-white mb-6 uppercase font-oswald">Conecta conmigo</h2>
                
                <!-- Social Icons from User Request -->
                <div id="social-icons">
                    <a href="" target="_blank">
                    <svg style="fill:#FFFFFF;" viewBox="-7 -2 26 26" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.525,9H14V7c0-1.032,0.084-1.682,1.563-1.682h1.868v-3.18C16.522,2.044,15.608,1.998,14.693,2 C11.98,2,10,3.657,10,6.699V9H7v4l3-0.001V22h4v-9.003l3.066-0.001L17.525,9z"></path>
                    </svg>
                    </a>
                    <a href="https://www.instagram.com/steveespiritu.music/" target="_blank">
                    <svg style="fill:#FFFFFF;" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">
                    <path d="M16.5,5c-6.33361,0 -11.5,5.16639 -11.5,11.5v15c0,6.33276 5.16621,11.5 11.5,11.5h15c6.33294,0 11.5,-5.16706 11.5,-11.5v-15c0,-6.33379 -5.16724,-11.5 -11.5,-11.5zM16.5,8h15c4.71124,0 8.5,3.78779 8.5,8.5v15c0,4.71106 -3.78894,8.5 -8.5,8.5h-15c-4.71221,0 -8.5,-3.78876 -8.5,-8.5v-15c0,-4.71239 3.78761,-8.5 8.5,-8.5zM34,12c-1.105,0 -2,0.895 -2,2c0,1.105 0.895,2 2,2c1.105,0 2,-0.895 2,-2c0,-1.105 -0.895,-2 -2,-2zM24,14c-5.50482,0 -10,4.49518 -10,10c0,5.50482 4.49518,10 10,10c5.50482,0 10,-4.49518 10,-10c0,-5.50482 -4.49518,-10 -10,-10zM24,17c3.88318,0 7,3.11682 7,7c0,3.88318 -3.11682,7 -7,7c-3.88318,0 -7,-3.11682 -7,-7c0,-3.88318 3.11682,-7 7,-7z"></path>
                    </svg>
                    </a>
                    <a href="https://www.youtube.com/@steve_espiritu" target="_blank">
                    <svg style="fill:#FFFFFF;" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13,5l3,9v6h2v-6l3,-9h-2l-2,6l-2,-6zM24,9c-1.06641,0 -1.58984,0.16797 -2.24219,0.70313c-0.625,0.52734 -0.79687,0.93359 -0.75781,2.29688v5c0,0.99609 0.16406,1.65234 0.76563,2.23438c0.625,0.58203 1.21484,0.76563 2.23438,0.76563c1.06641,0 1.64844,-0.18359 2.25,-0.76562c0.625,-0.55859 0.75,-1.23828 0.75,-2.23437v-5c0,-0.88281 -0.15625,-1.71875 -0.76172,-2.27734c-0.625,-0.57422 -1.26953,-0.72266 -2.23828,-0.72266zM29,9v9c0,0.97266 0.98047,2 2,2c1.01953,0 1.55859,-0.51172 2,-1v1h2v-11h-2v8c-0.01172,0.68359 -0.81641,1 -1,1c-0.20703,0 -1,-0.04297 -1,-1v-8zM24,11c0.30078,0 1,-0.00391 1,1v5c0,0.96875 -0.67578,1 -1,1c-0.30078,0 -1,-0.01172 -1,-1v-5c0,-0.81641 0.43359,-1 1,-1zM10,22c-3.59375,0 -6,2.38281 -6,6v9.5c0,3.61719 2.40625,6.5 6,6.5h30c3.59375,0 6,-2.38281 6,-6v-10c0,-3.61719 -2.40625,-6 -6,-6zM12,26h6v2h-2v12h-2v-12h-2zM26,26h2v4c0.23047,-0.35937 0.57422,-0.64453 0.90234,-0.80469c0.32031,-0.16406 0.64453,-0.25781 0.97266,-0.25781c0.64844,0 1.15625,0.23438 1.50391,0.67188c0.34766,0.44141 0.62109,1.02734 0.62109,1.89063v6c0,0.74219 -0.25,1.20313 -0.57812,1.59766c-0.32031,0.39453 -0.80078,0.89453 -1.42187,0.90234c-1.05078,0.01172 -1.61328,-0.55078 -2,-1v1h-2zM18,29h2v8c0,0.23047 0.26953,1.00781 1,1c0.8125,-0.00781 0.82031,-0.76562 1,-1v-8h2v11h-2v-1c-0.37109,0.4375 -0.5625,0.57422 -0.98047,0.78125c-0.41406,0.23438 -0.83594,0.21875 -1.22656,0.21875c-0.48437,0 -1.03516,-0.4375 -1.29297,-0.76562c-0.23047,-0.30078 -0.5,-0.60937 -0.5,-1.23437zM36.19922,29c0.94922,0 1.61719,0.20313 2.12109,0.73438c0.51563,0.53125 0.67969,1.15234 0.67969,2.15234v3.11328h-4v1.54688c0,0.55859 0.07422,0.91406 0.21875,1.125c0.13672,0.23047 0.41406,0.33203 0.78125,0.32813c0.40625,-0.00391 0.66406,-0.08594 0.80078,-0.26953c0.14063,-0.16406 0.19922,-0.62891 0.19922,-1.23047v-0.5h2v0.59375c0,1.08984 -0.08594,1.90234 -0.625,2.43359c-0.50781,0.55859 -1.30078,0.81641 -2.33984,0.81641c-0.94922,0 -1.69141,-0.28125 -2.22266,-0.85937c-0.53125,-0.57812 -0.80859,-1.37109 -0.80859,-2.39062v-4.70703c0,-0.90625 0.31641,-1.57812 0.89844,-2.17578c0.46875,-0.48047 1.34766,-0.71094 2.29688,-0.71094zM29,30.5c-0.55078,0 -0.99219,0.49609 -1,1v6c0.00781,0.28906 0.44922,0.5 1,0.5c0.55078,0 1,-0.42578 1,-0.97656v-5.02344c0,-1 -0.44922,-1.5 -1,-1.5zM36,31c-0.55078,0 -0.99219,0.46484 -1,1v1h2v-1c0,-0.61328 -0.44922,-1 -1,-1z"></path>
                    </svg>
                    </a>
                </div>
                
                <p class="text-xs text-gray-500 uppercase tracking-widest">© 2024 Steve Espíritu Music. Todos los derechos reservados.</p>
            </div>
        </footer>
    </div>

    <!-- TABS APP -->
    <div id="tabs-app" class="view-container min-h-screen pt-28 px-4 bg-black/90">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center mb-8 border-b border-white/10 pb-8">
                <div class="mb-4 md:mb-0">
                    <button onclick="showHome()" class="text-gray-400 hover:text-white flex items-center gap-2 mb-2 uppercase text-xs font-bold tracking-widest">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i> Volver al Inicio
                    </button>
                    <h2 class="text-4xl font-bold text-white font-oswald uppercase">Base de Datos <span class="text-[#17e6b7]">Maestra</span></h2>
                </div>
                <div class="bg-[#FF424D] text-white px-6 py-3 rounded font-bold uppercase tracking-wider flex items-center gap-3 cursor-pointer hover:bg-red-600 transition-colors" onclick="window.open('https://patreon.com/steve_espiritu', '_blank')">
                    <i data-lucide="heart" class="fill-current"></i>
                    <div>
                        <span class="block text-xs opacity-80">Apoya el canal</span>
                        <span class="block leading-none">Ir a Patreon</span>
                    </div>
                </div>
            </div>

            <div class="max-w-5xl mx-auto mb-16">
                <div class="bg-black/60 border border-white/10 rounded-xl p-8 backdrop-blur-md shadow-xl">
                    <h3 class="text-3xl font-bold text-white font-oswald uppercase mb-4 text-center">
                        🎸 Base Profesional de Transcripciones 🎸
                    </h3>
                    <p class="text-gray-300 text-center max-w-3xl mx-auto mb-6">
                        Hola, soy <span class="text-[#17e6b7] font-bold">Steve Espíritu</span>. Guitarrista profesional con más de <span class="font-bold text-white">10 años de experiencia</span> y un oído entrenado para transcribir música con una precisión real cercana al <span class="text-[#FF424D] font-bold">99%</span>.
                    </p>
                    <div class="text-center mb-6">
                        <p class="text-white font-semibold mb-2">¿Cansado de tutoriales con notas incorrectas?</p>
                        <p class="text-gray-400 max-w-3xl mx-auto">
                            En internet abundan los tutoriales mal transcritos. Aquí no interpretas canciones: <span class="text-white font-bold">reproduces la versión original real</span>, nota por nota, como fue grabada en estudio.
                        </p>
                    </div>
                    <div class="border-t border-white/10 my-6"></div>
                    <div class="grid md:grid-cols-2 gap-6 text-gray-300 text-sm">
                        <div>
                            <h4 class="text-white font-bold mb-2">🔹 En YouTube encontrarás:</h4>
                            <ul class="space-y-1">
                                <li>✅ Covers de alta calidad</li>
                                <li>✅ Tutoriales cortos con TABS animadas (gratis)</li>
                                <li>✅ Transcripciones precisas</li>
                                <li class="mt-2 text-[#17e6b7] font-semibold">Formatos: Full Guitar · Guitar Solos · Bass · Key Solos · Fingerstyle · Orchestra</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-white font-bold mb-2">🔹 En Patreon desbloqueas:</h4>
                            <ul class="space-y-1">
                                <li>🎼 Tutoriales exclusivos con TABS animadas</li>
                                <li>🎸 Pistas separadas (lead, rhythm, bass)</li>
                                <li>🎶 Backing tracks para práctica real</li>
                                <li>📜 TABS en PDF + archivos GUITAR PRO 8</li>
                            </ul>
                        </div>
                    </div>
                    <div class="border-t border-white/10 my-6"></div>
                    <p class="text-center text-white font-semibold italic max-w-3xl mx-auto">
                        “Si buscas transcripciones de alta fidelidad para tocar como tus ídolos (incluso como en la versión de estudio original), este no es un canal más: <span class="text-[#FF424D] font-bold">es una base profesional.</span>”
                    </p>
                </div>
            </div>

            <!-- PATREON PROMO BANNER -->
            <div class="mb-12">
                <div class="bg-gradient-to-r from-[#FF424D] to-black p-1 rounded-lg shadow-xl cursor-pointer hover:scale-[1.01] transition-transform" onclick="window.open('https://patreon.com/steve_espiritu','_blank')">
                    <div class="bg-black/90 p-6 rounded flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-[#FF424D] p-3 rounded-full"><i data-lucide="heart" class="text-white w-6 h-6"></i></div>
                            <div>
                                <h3 class="text-xl font-bold text-white font-oswald">Acceso Premium en Patreon</h3>
                                <p class="text-gray-400 text-sm">Archivos, descargas y materiales exclusivos para músicos serios.</p>
                            </div>
                        </div>
                        <button class="jagged-btn px-6 py-3 bg-[#FF424D] text-white rounded font-bold uppercase tracking-wider">Convertirse en Mecenas</button>
                    </div>
                </div>
            </div>

            
<!-- STICKY SEARCH BAR + LEGEND & STATS -->
            
                <!-- Search Bar -->
                <div class="sticky top-24 z-30 mb-8 space-y-4 bg-[#06151a]/95 backdrop-blur p-6 rounded border border-[#17e6b7]/30 shadow-xl">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="relative group">
                            <i data-lucide="search" class="absolute left-4 top-3.5 text-gray-500 w-5 h-5 transition-colors group-focus-within:text-[#17e6b7]"></i>
                            <input type="text" id="appSongInput" placeholder="BUSCAR POR TÍTULO..." 
                                   class="w-full bg-black/50 border border-white/20 rounded py-3 pl-12 pr-4 text-white focus:outline-none focus:border-[#17e6b7] focus:ring-1 focus:ring-[#17e6b7] transition-all font-oswald uppercase tracking-wide placeholder-gray-600">
                        </div>
                        <div class="relative group">
                            <i data-lucide="mic-2" class="absolute left-4 top-3.5 text-gray-500 w-5 h-5 transition-colors group-focus-within:text-[#17e6b7]"></i>
                            <input type="text" id="appBandInput" placeholder="BUSCAR POR BANDA..." 
                                   class="w-full bg-black/50 border border-white/20 rounded py-3 pl-12 pr-4 text-white focus:outline-none focus:border-[#17e6b7] focus:ring-1 focus:ring-[#17e6b7] transition-all font-oswald uppercase tracking-wide placeholder-gray-600">
                        </div>
                    </div>
                </div>
                
                <!-- Stats & Legend -->
                <div class="flex flex-col md:flex-row justify-between items-center gap-4 text-xs md:text-sm text-gray-400 font-oswald uppercase tracking-widest bg-black/80 backdrop-blur p-3 rounded-xl border border-white/5">
                    <!-- Stats (Left) -->
                    <div class="px-4 font-bold text-white border-b md:border-b-0 md:border-r border-white/10 pb-2 md:pb-0 md:pr-4" id="statsDisplay">
                        Cargando estadísticas...
                    </div>
                    
                    <!-- Legend (Right/Center) -->
                    <div class="flex flex-wrap justify-center gap-4 md:gap-8 px-4">
                        <div class="flex items-center gap-2">
                            <span class="block w-2 h-2 md:w-3 md:h-3 rounded-full bg-[#17e6b7] shadow-[0_0_5px_#17e6b7]"></span>
                            <span>Gratis</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="block w-2 h-2 md:w-3 md:h-3 rounded-full bg-[#F59E0B] shadow-[0_0_8px_#F59E0B]"></span>
                            <span>Premium</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="block w-2 h-2 md:w-3 md:h-3 rounded-full bg-[#ef4444] opacity-50"></span>
                            <span>No Disponible</span>
                        </div>
                    </div>
                </div>
         
            <div id="appTabsContainer" class="flex flex-col gap-4 pb-20"></div>
            <div id="noResults" class="hidden text-center py-20">
                <i data-lucide="music" class="w-16 h-16 text-gray-700 mx-auto mb-4"></i>
                <p class="text-gray-500 font-oswald uppercase text-xl">No se encontraron resultados</p>
            </div>
        </div>
    </div>

    <!-- LOGICA JS -->
    <script>
        lucide.createIcons();

        // --- DARK / LIGHT MODE LOGIC ---
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle('light-mode');
            
            // Save preference
            const isLight = body.classList.contains('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
            
            updateThemeIcons(isLight);
        }

        function updateThemeIcons(isLight) {
            const sunIcon = document.getElementById('icon-sun');
            const moonIcon = document.getElementById('icon-moon');
            const sunIconMobile = document.getElementById('icon-sun-mobile');
            const moonIconMobile = document.getElementById('icon-moon-mobile');

            if (isLight) {
                if(sunIcon) sunIcon.classList.remove('hidden');
                if(moonIcon) moonIcon.classList.add('hidden');
                if(sunIconMobile) sunIconMobile.classList.remove('hidden');
                if(moonIconMobile) moonIconMobile.classList.add('hidden');
            } else {
                if(sunIcon) sunIcon.classList.add('hidden');
                if(moonIcon) moonIcon.classList.remove('hidden');
                if(sunIconMobile) sunIconMobile.classList.add('hidden');
                if(moonIconMobile) moonIconMobile.classList.remove('hidden');
            }
        }

        // Initialize Theme on Load
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                updateThemeIcons(true);
            } else {
                updateThemeIcons(false);
            }
            
            // --- FIX DEEP LINKING (Prevent flash of Landing Page) ---
            // Revisar URL antes de cargar nada
            const urlParams = new URLSearchParams(window.location.search);
            const songParam = urlParams.get('song');
            
            if (songParam) {
                // Si hay parámetro, forzar vista de TABS inmediatamente
                // Esto ocurre antes de que el usuario pueda ver la landing page
                landingPage.classList.remove('active');
                tabsApp.classList.add('active');
                
                // Pre-llenar input para que cuando carguen los datos se filtre
                const cleanText = decodeURIComponent(songParam.replace(/-/g, ' '));
                const songInputEl = document.getElementById('appSongInput');
                if(songInputEl) songInputEl.value = cleanText;
            }
        });


        const landingPage = document.getElementById('landing-page');
        const tabsApp = document.getElementById('tabs-app');
        const playlistModal = document.getElementById('playlist-modal');

        function showHome() { window.scrollTo(0, 0); landingPage.classList.add('active'); tabsApp.classList.remove('active'); }
        function showTabsApp() { window.scrollTo(0, 0); landingPage.classList.remove('active'); tabsApp.classList.add('active'); }
        
        function scrollToSection(id) {
            if (!landingPage.classList.contains('active')) {
                showHome();
                setTimeout(() => { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }, 100);
            } else {
                document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            }
        }
        function toggleMobile() { document.getElementById('mobile-menu').classList.toggle('hidden'); }

        // --- GOOGLE SHEETS URL ---
        const GOOGLE_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQih4AHFQYNLGk4Znioq0IGioNRdIsTlZDGWWBGsV1zeEtm7WJMj-tqLwPfVyfpmL6-fiesfIZ-Ua-h/pub?output=tsv"; 
        
        const rawDataFallback = `
BANDA	FOTO	LINK	CANCIÓN	GUITAR SOLO				FULL GUITAR				FULL BASS				KEY SOLO				FULL KEY				FINGERSTYLE				ORCHESTRAL				
				Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF	Premium	Cover	Tutorial	PDF
Las Cuerdas Breñenses	https://i.scdn.co/image/ab67616d0000b2737f556f83de685d1983667a28	https://youtube.com/watch?v=OeXr3aGy7FU	Jinetes En El Cielo					#		https://patreon.com/post	OeXr3aGy7FU	9Svo8iO4M8g	https://bit.ly/4775m1W															
Starship	https://i.scdn.co/image/ab67616d0000b273377198e5b790b5ebf137bd83	#	Nothing's Gonna Stop Us Now		https://youtu.be/3wxyN3z9PL4	WwhtyBPyAAc	#																			
`;

        const allSongs = [];
        const container = document.getElementById('appTabsContainer');
        const songInput = document.getElementById('appSongInput');
        const bandInput = document.getElementById('appBandInput');
        const noResults = document.getElementById('noResults');

        function normalizeStr(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
        }

        function getYoutubeId(url) {
            if (!url) return "";
            if (url.length === 11) return url;
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : url; 
        }

        const versionLogos = [
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi0PEjlMSqdgHFngRjA53Zsy7aPRRgzkdCg4L8_JmnWHdLD0f5j176UmGnn_EaVgyB6IxFS6uZdZcprIWbU4m4QJsqLFsnIgBSWJRwb0kNWYCM0FvkL4WttElLfJ1hSXT_Ob6IIXhYVZ9TOhf7vZK8I04ut_9qXPI4H6k0LgJw9ET4i5UNQk1QzFlTDTOI/s1600/image%20(2).png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhKwFs2agQAgWuyfwqiU-DchCFHXkHesA9R61UvcWLs_qnyCafYJL3YlqQnvI4nci1pgpTq7x7HbncGvfKQ7ZhO4iqNYSOQ4WZ6AYOS8IeQ-wJbYnPKxUki08qQIDpCxbhAgGpOMm3cDUJVORJLGlh92aP2j3lAWv6lrhKWQxQACfd_MpiG4Uz2Vzh2MC0/s320/image%20(4).png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhQkFQNjEs6NdGnOUPZFiHyeCMGhaZmO30akV9LsvncKG6Lo4XevA-Lzh93gI0Ngw9vsMcBsHtTj5svNfDg5uAHb-kxRvSiK7Vyn7xvAlyXF7YM74LcbTJQN2HcEYeRTAqnE5VRI0y54aRHChjy1gGPqO5F4QNy0KMgvZFtxk6TJdzTFUvqfT_vfbiFAwM/s994/bass-guitar-glyph-icon-music-and-instrument-vector-18444937-Photoroom.png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXBJ-juk1lBq8CGpdLfpZnb4EktrI8fgVl8M1FrRPRLlYnScKY7XO-WqZ87gRGSvDyboNK1vL4d7HvYXxlfXEPDghTg1F0hApuD9yNIkyMGJUWxc3C7ZoSqnEYN6SQRD1ZdplkCabFEemjGulKdKh7KRRUyF8gspdYU1Q52RxnsCxM4AM2jZiRgzpNTfE/s320/key%20solo.png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEisY86oHQPGOPXCAkukYznweC00xMChCTSsYDN8DPMlyUx29m9k0cs-JVlC-Yvbgqbx8umsar818UFCIYRNcpomKKEHo28HQjLgspZQyk5ip3DHzRuTZd8Nh9yjOqBiAup2NYizGQM_9Of_dmHtOmA4xGMtgjr5Q0o-f39zqDkrCw-q58i5_n6guOMucdg/s320/full%20key.png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEif3S3SG5q8s0xg7BWKBZW7lm4jJxSBr942mFJYNoAvNH1pfPlnemb46MC5x-p3iQSIEnlS3jkI5crbYuHXsoFUTCsAi93f8UCTzd-LwHHlbgoMZQuAwfV61BmlEkrk12XV1xfN1ixWstznZYcE4tQl9qC0gHQE_lEQ0isEvF1dOCxfUGvr4dutsL_hhcs/s1600/image%20(3).png", 
            "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhkZ4kNSTc9OnFjEgISULslmWKQoafZzWKwzRRH7AA0X13i0j1JXfJTGguTbCavzxRFJvwSQWeo8EmjS2mA4iDOWpKHcKmoAQCeDvA-atl9Dh-hoFOzUkb_ckjPx3VAs-4oKF3cPgaWwd_WnVr4ybHaYzdh_XJY7N9pakDbOQGJ5JN4jUFBHtFqjk_LFWs/s320/image%20(5).png"
        ];
        const versionKeys = ["Guitar Solo", "Full Guitar", "Full Bass", "Key Solo", "Full Key", "Fingerstyle", "Orchestral"];

        async function loadData() {
            try {
                const res = await fetch(GOOGLE_SHEET_URL);
                if(!res.ok) throw new Error("No url");
                const txt = await res.text();
                processData(txt);
            } catch(e) { processData(rawDataFallback.trim()); }
        }

        function processData(text) {
            const lines = text.split('\n');
            lines.forEach((line, index) => {
                // Saltar las primeras 2 filas como encabezado explícitamente
                if (index < 2) return; 

                const cols = line.split('\t');
                if (cols.length < 4) return;
                // Verificación extra de seguridad para encabezados
                if(cols[0].trim().toUpperCase().includes('BANDA') || cols[0].trim() === '') return;

                const song = {
                    band: cols[0].trim(),
                    albumArt: cols[1].trim(),
                    originalLink: cols[2].trim(),
                    title: cols[3].trim(),
                    versions: {}
                };

                const map = [
                    {key:"Guitar Solo", i:4}, {key:"Full Guitar", i:8}, {key:"Full Bass", i:12}, 
                    {key:"Key Solo", i:16}, {key:"Full Key", i:20}, {key:"Fingerstyle", i:24}, {key:"Orchestral", i:28}
                ];

                map.forEach(v => {
                    const prem = cols[v.i]?cols[v.i].trim():"";
                    const cov = getYoutubeId(cols[v.i+1]?cols[v.i+1].trim():"");
                    const tut = getYoutubeId(cols[v.i+2]?cols[v.i+2].trim():"");
                    const pdf = cols[v.i+3]?cols[v.i+3].trim():"";
                    
                    if(prem || cov || tut || (pdf && pdf!=='#')) {
                        song.versions[v.key] = {premium:prem, cover:cov, tutorial:tut, pdf:pdf};
                    }
                });

                // Solo agregar la canción si tiene al menos una versión disponible
                // Esto filtra filas con celdas vacías de E a AF
                if (Object.keys(song.versions).length > 0) {
                    allSongs.push(song);
                }
            });
            initApp();
        }

        function initApp() {
              // CALCULO DE ESTADÍSTICAS
            const totalSongs = allSongs.length;
            const uniqueArtists = new Set(allSongs.map(s => s.band.trim().toLowerCase())).size;
            
            const statsEl = document.getElementById('statsDisplay');
            if(statsEl) {
                statsEl.innerHTML = `<span class="text-[#17e6b7] text-lg">${totalSongs}</span> Canciones &nbsp;<span class="text-gray-600">|</span>&nbsp; <span class="text-[#1ab4f4] text-lg">${uniqueArtists}</span> Artistas`;
            }
            renderSongs(allSongs);

            // --- DEEP LINKING (Ejecución Post-Carga) ---
            const urlParams = new URLSearchParams(window.location.search);
            const songParam = urlParams.get('song'); 

            if (songParam) {
                // Ya hemos cambiado la vista en el listener 'DOMContentLoaded' para evitar flash
                // Ahora solo aseguramos el filtrado con los datos cargados
                const cleanText = decodeURIComponent(songParam.replace(/-/g, ' '));
                songInput.value = cleanText; // Asegurar valor
                runFilter();
            }
        }

        function renderSongs(list) {
            container.innerHTML = '';
            if(list.length === 0) { noResults.classList.remove('hidden'); return; }
            noResults.classList.add('hidden');

            list.forEach((song, idx) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'w-full';
                wrapper.id = `wrapper-${idx}`;

                const card = document.createElement('div');
                card.className = 'tab-card p-3 rounded border border-white/5';
                
                const linkAttr = (song.originalLink && song.originalLink !== '#') ? `href="${song.originalLink}" target="_blank"` : '';
                
                card.innerHTML = `
                <div class="flex flex-wrap items-center w-full">
                    <div class="flex items-center gap-4 w-full md:w-auto mb-4 md:mb-0">
                        <div class="w-20 h-20 flex-shrink-0 relative overflow-hidden rounded bg-black group-hover:scale-105 transition-transform cursor-pointer">
                            <a ${linkAttr} class="block w-full h-full" title="Ir a la canción original">
                                <img src="${song.albumArt}" class="w-full h-full object-cover">
                            </a>
                        </div>
                        <div class="flex-grow">
                            <h3 class="text-white font-bold text-lg leading-tight uppercase font-oswald text-[#17e6b7]">${song.title}</h3>
                            <p class="text-xs text-gray-400 uppercase tracking-widest italic mt-2">${song.band}</p>
                        </div>
                    </div>
                    <div class="icons-container flex flex-wrap gap-2 w-full md:w-auto md:ml-auto justify-start md:justify-end"></div>
                </div>
                `;

              
                    const iconsContainer = card.querySelector('.icons-container');
                versionKeys.forEach((key, kIdx) => {
                    const avail = song.versions[key];
                    const div = document.createElement('div');
                    
                    // Lógica de clases:
                    let statusClass = 'unavailable';
                    if (avail) {
                        statusClass = avail.premium ? 'premium' : 'available';
                    }

                    div.className = `version-icon ${statusClass}`;
                    div.title = key;
                    
                    // Lógica del punto de estado
                    let dotClass = 'red';
                    if (avail) {
                        dotClass = avail.premium ? 'orange' : 'green';
                    }

                    // Determinar si la imagen debe invertirse en modo claro
                    // Indices: 0 (G.Solo), 1 (F.Guitar), 2 (F.Bass), 5 (Fingerstyle), 6 (Orchestral)
                    // Excluye: 3 (Key Solo), 4 (Full Key)
                    const shouldInvert = [0, 1, 2, 5, 6].includes(kIdx);
                    const imgClass = shouldInvert ? 'invert-on-light' : '';

                    div.innerHTML = `<div class="status-dot ${dotClass}"></div><img src="${versionLogos[kIdx]}" class="${imgClass}">`;
                    
                    div.onclick = () => {
                        const existingPanel = wrapper.querySelector('.dynamic-panel');
                        if(existingPanel) {
                            const wasSame = existingPanel.getAttribute('data-key') === key;
                            existingPanel.remove(); 
                            if(wasSame) return; 
                        }
                        document.querySelectorAll('.dynamic-panel').forEach(p => p.remove());
                        createPanel(wrapper, avail, key);
                    };
                    iconsContainer.appendChild(div);
                });

                wrapper.appendChild(card);
                container.appendChild(wrapper);
            });
        }

        function createPanel(wrapper, data, keyName) {
            const panel = document.createElement('div');
            panel.className = 'dynamic-panel w-full rounded-b border-t border-[#17e6b7]/30 bg-black/90 p-4';
            panel.setAttribute('data-key', keyName);

            if(!data) {
                panel.innerHTML = `<div class="text-center p-8 text-gray-400"><p class="font-oswald uppercase text-xl text-red-500 mb-2">Versión No Disponible</p><p class="text-sm">Aún no existe la versión <strong>${keyName}</strong>.</p></div>`;
                wrapper.appendChild(panel);
                return;
            }

            let patreonHtml = '';
            if(data.premium) {
                patreonHtml = `<a id="patreonenlace" href="${data.premium}" target="_blank"><p>Ver el tutorial completo en </p><img src='https://1000marcas.net/wp-content/uploads/2021/07/Patreon-logo-2013.png'/></a>`;
            }

            let buttonsHtml = '';
            if(data.cover) buttonsHtml += `<button onclick="playVideo(this, '${data.cover}')" class="jagged-btn px-4 py-2 bg-[#17e6b7] text-black font-bold text-xs mx-2 mb-2">COVER</button>`;
            if(data.tutorial) buttonsHtml += `<button onclick="playVideo(this, '${data.tutorial}')" class="jagged-btn px-4 py-2 bg-[#1ab4f4] text-black font-bold text-xs mx-2 mb-2">TUTORIAL</button>`;
            if(data.pdf && data.pdf !== '#') buttonsHtml += `<a href="${data.pdf}" target="_blank" class="jagged-btn px-4 py-2 bg-white text-black font-bold text-xs mx-2 mb-2 inline-block">DESCARGAR PDF</a>`;

            const initialVideo = data.cover || data.tutorial;
            const displayHtml = initialVideo 
                ? `<iframe src="https://www.youtube.com/embed/${initialVideo}" class="w-full h-full absolute top-0 left-0" frameborder="0" allowfullscreen></iframe>`
                : `<div class="flex items-center justify-center h-full text-yellow-500 font-bold">SOLO PDF DISPONIBLE</div>`;

            panel.innerHTML = `<div class="flex flex-col gap-4">${patreonHtml}<div class="video-container w-full aspect-video bg-black relative rounded overflow-hidden border border-white/10">${displayHtml}</div><div class="flex justify-center flex-wrap">${buttonsHtml}</div></div>`;
            wrapper.appendChild(panel);
        }

        window.playVideo = function(btn, id) {
            const container = btn.closest('.dynamic-panel').querySelector('.video-container');
            container.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1" class="w-full h-full absolute top-0 left-0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
        };
/* ===========================
   CONFIG
=========================== */
const YOUTUBE_API_KEY = "AIzaSyDJ0CI6w9jOJg4YMoV6xkz8ZIm7UOaj0XU"; // 👈 OBLIGATORIO

/* ===========================
   MODAL CONTROL
=========================== */

async function openPlaylistModal(playlistId, title, desc) {
    const modal = document.getElementById('playlist-modal');
    const iframe = document.getElementById('playlist-iframe');
    const gallery = document.getElementById('playlist-gallery');

    document.getElementById('playlist-title').querySelector('span').innerText = title;
    document.getElementById('playlist-desc').innerText = desc;

    gallery.innerHTML = `<p class="text-gray-400 text-sm text-center">Cargando playlist...</p>`;
    iframe.src = "";

    modal.classList.remove('hidden');
    modal.classList.add('flex');

    // Fetch playlist
    const videos = await fetchPlaylistVideos(playlistId);

    if (!videos.length) {
        gallery.innerHTML = `<p class="text-red-500 text-sm text-center">No se pudieron cargar los videos</p>`;
        return;
    }

    // Video principal
    const firstVideoId = videos[0].videoId;
    iframe.src = `https://www.youtube.com/embed/${firstVideoId}?autoplay=1`;

    // Galería
    gallery.innerHTML = "";

    videos.forEach((video, index) => {
        const item = document.createElement('div');
        item.className = `
            flex gap-2 cursor-pointer p-2 rounded 
            hover:bg-[#17e6b7]/10 transition-all
            ${index === 0 ? 'bg-[#17e6b7]/20' : ''}
        `;

        item.innerHTML = `
            <img src="${video.thumb}" class="w-24 h-16 object-cover rounded">
            <div class="flex flex-col justify-center">
                <p class="text-white text-xs font-bold leading-tight line-clamp-2">${video.title}</p>
                <span class="text-gray-400 text-[10px]">Steve Espíritu TV</span>
            </div>
        `;

        item.onclick = () => {
            iframe.src = `https://www.youtube.com/embed/${video.videoId}?autoplay=1`;

            // highlight activo
            document.querySelectorAll('#playlist-gallery > div').forEach(el=>{
                el.classList.remove('bg-[#17e6b7]/20');
            });
            item.classList.add('bg-[#17e6b7]/20');
        };

        gallery.appendChild(item);
    });
}

function closePlaylistModal(){
    const modal = document.getElementById('playlist-modal');
    const iframe = document.getElementById('playlist-iframe');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    iframe.src = ""; // detener video
}

/* ===========================
   YOUTUBE API
=========================== */

async function fetchPlaylistVideos(playlistId) {
    let videos = [];
    let nextPageToken = "";

    try {
        do {
            const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${YOUTUBE_API_KEY}&pageToken=${nextPageToken}`;
            const res = await fetch(url);
            const data = await res.json();

            if (!data.items) break;

            data.items.forEach(item => {
                if(item.snippet?.resourceId?.videoId){
                    videos.push({
                        videoId: item.snippet.resourceId.videoId,
                        title: item.snippet.title,
                        thumb: item.snippet.thumbnails?.medium?.url || ""
                    });
                }
            });

            nextPageToken = data.nextPageToken || "";
        } while (nextPageToken);

    } catch (e) {
        console.error("Error cargando playlist:", e);
    }

    return videos;
}
        function runFilter() {
            const songTerm = normalizeStr(songInput.value);
            const bandTerm = normalizeStr(bandInput.value);
            
            const filtered = allSongs.filter(song => {
                const songTitle = normalizeStr(song.title);
                const songBand = normalizeStr(song.band);
                
                const matchesSong = songTitle.includes(songTerm);
                const matchesBand = songBand.includes(bandTerm);
                
                return matchesSong && matchesBand;
            });
            renderSongs(filtered);
        }
        
        songInput.addEventListener('input', runFilter);
        bandInput.addEventListener('input', runFilter);

        loadData();
       // --- SOUND TOGGLE LOGIC ---
function toggleSound() {
    const audio = document.getElementById('thunder-audio');
    const isPlaying = !audio.paused;
    
    if (isPlaying) {
        audio.pause();
    } else {
        // Intentar reproducir (puede fallar si no hay interacción previa del usuario)
        audio.play().catch(e => console.log("Audio autoplay prevented", e));
    }
    updateSoundIcons(!isPlaying);
}

function updateSoundIcons(isPlaying) {
    const soundOffIcon = document.getElementById('icon-sound-off');
    const soundOnIcon = document.getElementById('icon-sound-on');
    const soundOffIconMobile = document.getElementById('icon-sound-off-mobile');
    const soundOnIconMobile = document.getElementById('icon-sound-on-mobile');

    if (isPlaying) {
        // Show Volume 2 (On)
        if(soundOffIcon) soundOffIcon.classList.add('hidden');
        if(soundOnIcon) soundOnIcon.classList.remove('hidden');
        if(soundOffIconMobile) soundOffIconMobile.classList.add('hidden');
        if(soundOnIconMobile) soundOnIconMobile.classList.remove('hidden');
    } else {
        // Show Volume X (Off)
        if(soundOffIcon) soundOffIcon.classList.remove('hidden');
        if(soundOnIcon) soundOnIcon.classList.add('hidden');
        if(soundOffIconMobile) soundOffIconMobile.classList.remove('hidden');
        if(soundOnIconMobile) soundOnIconMobile.classList.add('hidden');
    }
}
    </script>
</body>
</html>
